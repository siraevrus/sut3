

1. # Роли

* Администратор	  
* Оператор ПК	  
* Работник склада	  
* Менеджер по продажам

В зависимости от ролей Разделы доступные ролям:

**Администратор**	

Доступны разделы:	

Администратор не привязан ни к какой компании и складу.

* Дашборд  
* Компания  
* Сотрудники  
* Товары  
* Запросы  
* Остатки  
* Товар в пути  
* Реализация  
* Приемка товара  
* Характеристики товара

**Оператор ПК**

Доступны разделы:	

* Товары  
* Остатки   
* Товар в пути

**Работник склада**	

Доступны разделы:	

* Запросы   
* Остатки  
* Товар в пути   
* Реализация   
* Приемка товара

**Менеджер по продажам**

Доступны разделы:	

* Запросы   
* Остатки   
* Товар в пути

| Раздел | Администратор | Оператор ПК | Работник склада | Менеджер по продажам |
| ----- | ----- | ----- | ----- | ----- |
| 1\. Дашборд | ✅ |  |  |  |
| 2\. Компания | ✅ |  |  |  |
| 3\. Сотрудники | ✅ |  |  |  |
| 4\. Товары | ✅ | ✅ |  |  |
| 5\. Запросы | ✅ |  | ✅ | ✅ |
| 6\. Остатки | ✅ | ✅ | ✅ | ✅ |
| 7\. Товар в пути | ✅ | ✅ | ✅ | ✅ |
| 8\. Реализация | ✅ |  | ✅ |  |
| 9\. Приёмка | ✅ |  | ✅ |  |
| 10\. Характеристики товара | ✅ |  |  |  |

2. # Разделы

* Авторизация  
* Дашборд  
* Компания  
* Сотрудники  
* Товары  
* Запросы  
* Остатки  
* Товар в пути  
* Реализация  
* Приемка товара  
* Характеристика товара

3. # Раздел «Авторизация»

В данном разделе происходит авторизация пользователей.

Состоит:

* Текстовое поле "Логин";  
* Текстовое поле "Пароль";  
* Кнопка "Войти"

**Проверка ввода email и пароль.**

* Если не верный логин и пароль то выводится уведомление "не верный логин или пароль, попробуйте восстановить пароль или обратитесь к администратору"  
* Если аккаунт заблокирован, то выводится сообщение «Ваш Аккаунт заблокирован»

4. # Раздел «Дашборд»

В разделе выводится общая сводка о компаниях

* Количество компаний  
* Количество сотрудников  
* Количество не отвеченных запросов  
* Популярные товары за 1 месяц.  
* Количество товаров в пути  
* Сумма  реализации за сегодня

5. # Раздел «Компания»

В Разделе «Компания» выводится список добавленных компаний.  
Состоит:

* Кнопка «Добавить компанию»  
* Столбце «Название компании»  
* Столбец «Количество сотрудников»  
* Столбец «Блок редактирования» (состоит из иконки редактирования, иконка архив).

Если пользователь архивирует  Компанию то выводится попап сообщение «Вы хотите архивировать компанию? Вместе с ней скроются все внесенные данные связанные с этой компанией» Кнопка Да/ Кнопка Отмена

В базе данных меняется статус на компания удалена, но фактически данные не удаляются.  
Вместе с этим будут скрыты все внесенные данные по компании, сотрудникам, всем внесенным записям.

Добавление компании состоит из полей:

* Текстовое поле «Название компании» (обязательное поле для заполнения, не более 100 символов)  
* Текстовое поле «Юридический адрес» (не обязательное поле для заполнения)  
* Текстовое поле «Почтовый адрес» (не обязательное поле для заполнения)  
* Текстовое поле «Телефон/факс» (не обязательное поле для заполнения)  
* Текстовое поле «Генеральный директор» (не обязательное поле для заполнения)  
* Текстовое поле «email» (не обязательное поле для заполнения)  
* Текстовое поле «ИНН» (не обязательное поле для заполнения)  
* Текстовое поле «КПП» (не обязательное поле для заполнения)  
* Текстовое поле «ОГРН» (не обязательное поле для заполнения)  
* Текстовое поле «БАНК» (не обязательное поле для заполнения)  
* Текстовое поле «Р/с» (не обязательное поле для заполнения)  
* Текстовое поле «К/с» (не обязательное поле для заполнения)  
* Текстовое поле «БИК» (не обязательное поле для заполнения)

  1. При нажатии на Название компании или просмотр выводится подраздел «О компании»

Состоит из 2 подразделов

* Информация о компании  
* Склады

Подраздел Информация о компании состоит из внесенной информации о компании с возможностью редактирования.

Подраздел Склад состоит из списка Складов которые добавлены к компании:

* Столбец «Название склада»  
* Столбец «Сотрудники» (выводит количество сотрудников, работающие на этом складе), Пример вывода «N сотрудников» где N общее количество сотрудников.  
* Столбец «Блок редактирования» (состоит из иконки редактирования, иконка удаления)  
* Кнопка «Добавить склад»

Добавление склада состоит:

* Текстовое поле «Название склада»  
* Текстовое поле «Адрес склада»  
* Кнопка «Добавить»

6. # Раздел «Сотрудники»

В Разделе Сотрудники выводятся все сотрудники добавленные за все время.

В профиле сотрудника указываются компании, в которых он может работать и в том числе склады.

Состоит:

*  Столбец «Дата добавления»  дата добавления сотрудника  
*  ФИО (Фамилия Имя Отчество) сотрудника  
*  Компания   
*  Должность  
*  Склад  
*  Дата блокировки (дата блокирования аккаунта)  
*  Блок редактирования (иконка блокировать, иконка редактировать)

* Кнопка «Добавить сотрудника»

Из списка сотрудников можно перейти на детальную страницу профиля сотрудника и на странице будет представлена вся информация о сотруднике с возможностью редактировать или заблокировать.

Блокирование сотрудника закрывает доступ сотрудника к системе.

**Добавление сотрудников**

Добавление сотрудников состоит из полей:

*  Выпадающий список «Должность» ( выпадают роли Администратор, Оператор ПК, Работник склада, Менеджер по продажам). Сотруднику можно прописать одну или несколько ролей. Но если выбран Администратор то другие роли ему недоступны.  
*  Текстовое поле «Имя»  
*  Текстовое поле «Фамилия»  
*  Текстовое поле «Отчество»  
*  Выпадающее поле «Выберите компанию» ( список компаний которые добавлены в разделе Компания)  
*  Выпадающее поле «Склад» (подгружается список складов выбранной ранее компании из выпадающее поле «Выберите компанию»)  
*  Текстовое поле «Логин»   
*  Текстовое поле «Телефон»  
*  текстовое поле «Пароль»  
*  Кнопка «Добавить сотрудника»

Если выбрана Роль «Администратор», то остаются только поля

*  Текстовое поле «Имя»  
*  Текстовое поле «Фамилия»  
*  Текстовое поле «Отчество»  
*  Текстовое поле «Логин»   
*  Текстовое поле «Телефон»  
*  текстовое поле «Пароль»  
*   Кнопка «Добавить сотрудника»

 

7. # Раздел «Товары»

Раздел «Товары» состоит из списка всех напрямую вручную добавленных товаров на склад ответственными сотрудниками.

Состоит

* Дата поступления  
* Наименование продукции  
* Основные характеристики товара  
* Номер Транспортного средства  
* Сотрудник  
* Блок редактирования (Иконка Редактировать/Иконка Удалить)  
* Кнопка «Добавить товар»

Кнопка «Добавить товар» открывает страницу Раздел Добавления товара состоит:

*  Дата поступления  
*  Номер Транспортного средства  
*  Характеристики  
*  Кнопка «Добавить новый товар»

Характеристики идут из раздела «Характеристики товара» и выводятся согласно полям выбранного шаблона.

Происходит автоматический подсчет  результата по формуле.

8. # Раздел «Запросы»

8.1. Раздел для Роли Администратор.

В данном разделе Администратор видит список всех запросов от сотрудников:

* Работник склада	  
* Менеджер по продажам

Список состоит:

* Дата запроса  
* Сотрудника (указывается Фамилия Имя Отчество сотрудника, который отправил запрос)  
* Наименование продукции  
* Характеристика товара согласно характеристикам товара  
* Статус запроса (Запрос обработан – выделен зеленым цветом/запрос не обработан – выделен красным цветом)

При нажатии на запрос открывается детальная информация о запросе

Детальный запрос состоит:

* Дата запроса  
* Фамилия Имя Отчество сотрудника который отправил запрос  
* Полная характеристика выбранного товара  
* Кнопка «Запрос обработан»

Если запрос уже был обработан то кнопка меняется на «Запрос не обработан», то есть только администратор может менять самостоятельно статус запроса.

8.2. Раздел для ролей которые отправляют запросы

Состоит:

* Дата запроса  
* Наименование продукции  
* Характеристика товара согласно характеристикам товара  
* Статус запроса (Запрос обработан – выделен зеленым цветом/запрос не обработан – выделен красным цветом)  
* Кнопка «Отправить запрос»

При нажатии на кнопку Отправить запрос открывается форма с  детальной информацией которую заполняют:

* Текстовое поле «Наименование продукции» \- подгружается список из шаблонов продукции  
* Текстовые поля «Характеристики» берутся из шаблона товара  
* Кнопка «Отправить запрос»

9. # Раздел «Остатки»

В разделе выводятся остатки продукции на складе после всех реализаций.

Товары могут появится на складе:

* Напрямую, добавляя вручную их в разделе «Товары»  
* Из раздела «Товары в пути»

Раздел состоит из 2 вкладок на странице

*  Вкладка «Производитель»  
*  Вкладка «Склад»

Вкладка «Производитель» состоит из списка всех производителей. Параметр производитель берется из характеристики шаблона товара.

Когда пользователь выбирает просмотр остатков во вкладке производитель, то открывается отдельная страница со списком остатков по производителю: 

Список:

*  Наименование продукции   
*  Склад (список всех складов, где есть в наличии продукция данного производителя)  
*  Объем или количество

При нажатии на продукцию открывается детальная информация о продукции

Когда пользователь выбирает просмотр остатков во вкладке Склад, то открывается отдельная страница со списком остатков на выбранном складе:

Список состоит:

*  Наименование продукции  
*  Производитель  
*  Объем/количество 

При нажатии на продукцию открывается детальная информация о продукции

10. # Раздел «Товар в пути»

    
В разделе выводится список всех отправленных товаров от поставщика на склад  
Администратор, Оператор ПК, Работник склада, Менеджер по продажам создает запись указав транспортировку товара с склада производителя  на склад продавца.

Состоит

* Дата отгрузки  
* Место отгрузки  
* Дата поступления  
* Склад продавца  
* ФИО Сотрудника (который завел карточку)  
* Блок редактирования (редактировать /удалить)  
* Кнопка «Добавить товар в пути»

Раздел «Добавление товара в пути»

В данном разделе Администратор, Оператор ПК, Работник склада, Менеджер заполняет карточку транспортировки товара.

* Текстовое поле «Место отгрузки»  
* Поле календарь «Дата отгрузки»  
* Выпадающий список «Склад» (в выпадающем списке выводится все склады которые указаны в карточке менеджера)  
* Поле календарь «дата отгрузки»  
* Поле загрузки файлов (загружаются файлы в формате jpg, jpeg, pdf, doc, docx, xsl, txt, .odt, .rtf и .pdf ) 

Блок Информация о грузе  
В данном блоке заполняется неограниченное количество информации о грузе

Состоит:

* Выпадающее поле «наименование продукции» (выбор типа продукции и все поля ниже формируются исходя из заполненных ранее полях данного типа продукции).

* Кнопка «добавить наименование продукции»  добавляет еще один набор полей.  
* Кнопка «Добавить доставку»  добавляет и сохраняет запись.

Раздел «Детальная страница о товаре в пути».  
Так как ответственный сотрудник обязан отслеживать приход груза, то когда груз прийдет он должен подтвердить, что товар прибыл на склад.

Состоит из заполненной карточки товара в пути.

Кнопка «Добавить товар в пути»

После нажатия Кнопка «Добавить товар в пути» информация уходит к сотруднику с ролью Работник склада и выводится в разделе «Приемка товара». 

Товар добавляется в склад только после подтверждения.

11. # Раздел «Реализация»

В данном разделе выводится все Реализации товара со всех складов. 

Реализацию делает только "Работник склада" или "Администратор".

Администратор видит информацию по всем складам. Ответственный сотрудник видит только тот склад, который указан в профиле сотрудника.

Состоит из списка:

* Дата реализации  
* Сумма  
* Производитель  
* Продукция  
* Объем/количество  
* Склад  
* Сотрудник (который создал реализацию)  
* Блок редактирования (иконка просмотр, иконка редактировать)  
* Кнопка «Добавить реализацию»

11.1	Раздел Добавления реализации:

Реализация товара возможна только с выбранного склада.

Cостоит:

* Выпадающее поле «склад» ( для администратора все склады, для сотрудника только те склады которые указаны в профиле)

После выбора склада выводится список всей продукции которая находится на складе

*  Продукция  
*  Характеристика   
*  Остаток ( либо объем в кубах либо количество)  
*  Кнопка «Создать реализацию»

Нажатие кнопки «Создать реализацию» открывает раздел в котором можно создать реализацию и после реализации этот объем или количество списывается со склада.

Cостоит из двух блоков:

*  Блок ввода данных  
*  Информация о продукции

Блок ввода данных состоит из полей обязательных к заполнению:

*  Поле календарь(заполняется автоматически текущей датой но можно внести изменения)  
*  Текстовое поле «Покупатель» (обязательно к заполнению)  
*  Текстовое поле «Количество»  
*  Текстовое поле «Цена продажи $/ БезНАЛ»  
*  Текстовое поле «Цена продажи $/ НАЛ»  
*  Текстовое поле «Курс»  
* Кнопка «Создать реализацию»

Поле ИТОГО ( общая сумма продажи полей Цена продажи/ БезНАЛ \+ Цена продажи/ НАЛ )

Блок Информация о продукции состоит из характеристик продукции

12. # Раздел «Приемка товара»

В даннном разделе «Работник склада» перепроверяет и подтверждает приемку товара на складе после того, как ее добавляет в разделе «Товар в пути»

Администратор видит полный список 

*  Дата отгрузки  
*  Место отгрузки  
*  Дата поступления  
*  Склад прибытия  
*  Сотрудник ( сотрудник который создал заявку в разделе товар в пути» 

При нажатии на просмотр карточки открывается детальная страница об отгрузке.  
Состоит из информации об отгрузке.  
Кнопка «Подтвердить приемку товара» нажатие на кнопку подтверждает получение товара и выводит в остаток на указанном складе.

**Процесс приемки товара** 

*Товар в пути → Приемка товара (подтверждение) → Остатки на складе.*

13. # Раздел «Характеристики товара»

В данном разделе только администратор создает и заполняет шаблоны  о всех возможных товарах , указывает формлу расчета, указывает характеристики и далее они исходя из этого формируется карточка товара.

Управление шаблонами товаров с настраиваемыми характеристиками и формулами расчета объема  
  Создание и управление шаблонами товаров     
 Настройка формул автоматического расчета объема

Формула расчета:

*  Текстовый редактор формулы  
*  Список доступных переменных  
*  Тестирование формулы в реальном времени  
*  Валидация синтаксиса

Раздел «Возможности

*  Создание и редактирование шаблонов  
*  Настройка характеристик товаров  
*  Визуальный редактор формул  
* Управление статусом шаблонов

Состоит :

*  Поле поиска по названию  
*  Кнопка «Создать шаблон»

Список состоит:

*  Название  
*  Характеристика  
*  Блок редактирования (иконка просмотр / иконка удалить)

**Добавление состоит:**

* Текстовое поле Название шаблона  
* Блок Характеристика   
* Кнопка «Добавить характеристику»

Кнопка «Добавить характеристику» добавляет поля:

*  Текстовое поле «Название характеристики»  
*  Текстовое поле «переменная»  
*  Тип данных (число,  текст, выпадающий список)  
*  Текстовое поле (зависит от типа данных)  
*  Единица измерения ( мм, см, метр, радиус, м³, м², кг, грамм,  
*  Чекбокс «обязательно к заполнению»  
*  Чекбокс «учитывать в формуле»  
*  Иконка «удалить»

Условия:

* **Название:** Отображается пользователю (русский язык)  
* **Переменная:** Используется в формуле (только английские буквы)  
* **В формуле:** Участвует в расчете объема  
* **Дополнительные поля:** Только для описания (не в формуле)

 Блок «Формула» 

* Текстовое поле в котором указывается формула расчета.  
* Используйте математические операторы: \+, , \*, /, (, )  
* Кнопка «тестировать формулу»  проверяет на корректность формулы на тестовых данных.

**Алгоритмы и бизнеслогика**

Расчет объема  
Входные данные:

* Формула из шаблона  
* Значения характеристик товара

**Алгоритм:**   
1\. Извлечение переменных из формулы (regex)  
2\. Фильтрация только переменных из атрибутов формулы  
3\. Замена переменных на числовые значения  
4\. Безопасное вычисление через math.js. с ограничениями  
5\. Округление результата до 2 знаков после запятой

**Безопасность:**

* Whitelist разрешенных функций  
* Валидация переменных  
* Ограничение сложности формул

**Валидация формул**  
Проверки:  
1\. Синтаксическая корректность  
2\. Наличие всех переменных в атрибутах  
3\. Отсутствие запрещенных функций  
4\. Корректность скобочной структуры

 **Группировка товаров**

**Алгоритм:**  
1\. Получение всех товаров по фильтрам  
2\. Группировка по template\_id \+ attributes (JSON)  
3\. Суммирование объемов в группах  
4\. Подсчет количества записей  
5\. Определение временного диапазона

# 14\. Технические требования

 **Технологический стек**

* Frontend:  
* HTML5 с семантической разметкой  
* CSS3 с флексбоксами и гридсистемой  
* JavaScript (Vanilla ES6+)  
* Адаптивный дизайн (Desktop, Tablet, Mobile)

**Backend:**

* PHP 8.1+ (процедурный стиль)  
* MySQL 5.7+ (InnoDB)  
* REST API архитектура  
* Nginx

Инфраструктура:

*  Apache/Nginx вебсервер  
*  Локальное развертывание  
*  Файловая структура без использования фреймворков

 Архитектурные принципы

Separation of Concerns:

*  HTML (структура)  
*  CSS (презентация)  
*  JavaScript (поведение)  
*  PHP (бизнеслогика)

APIFirst подход:

*  Все операции через REST API  
*  JSON формат обмена данными  
*  Единообразные HTTP методы

Компонентная структура:

*  Независимые модули  
*  Переиспользуемые компоненты  
*  Модульная файловая организация

Пользовательский интерфейс  
Дизайнсистема

**Цветовая схема:**

* Основной: \#2c5ccf (синий)  
* Вторичный: \#38a169 (зеленый)  
* Опасность: \#e53e3e (красный)  
* Фон: \#f7fafc (светлосерый)  
* Текст: \#2d3748 (темносерый)

**Типографика:**

* Основной шрифт: система (systemui, applesystem, sansserif)  
* Моноширинный: monospace (для кода и переменных)  
* Размеры: 14px (base), 16px (large), 12px (small)

**Компоненты:**

* Кнопки: с rounded углами, hover эффектами  
* Карточки: с тенью и скругленными углами  
* Формы: четкие лейблы, валидация в реальном времени  
* Таблицы: адаптивные, с hover эффектами

**Адаптивность**

* Breakpoints:  
* Desktop: 1024px+  
* Tablet: 768px  1023px  
* Mobile: до 767px

Адаптивные изменения:

*  Навигация: коллапсирует в мобильное меню  
*  Таблицы: горизонтальная прокрутка  
*  Формы: вертикальная компоновка  
*  Кнопки: увеличенные размеры для touch

UX принципы

Навигация:

*  Хлебные крошки на всех страницах  
*  Четкие кнопки "Назад" и "Отменить"  
*  Быстрые действия в один клик

Обратная связь:

*  Уведомления об успешных операциях  
*  Детальные сообщения об ошибках  
*  Индикаторы загрузки  
*  Валидация в реальном времени

Производительность:

*  Пагинация для больших списков  
*  Дебаунсинг для поиска  
*  Ленивая загрузка контента

**Требования к производительности**

Время отклика

*  Загрузка страниц: \< 2 сек  
*  API запросы: \< 1 сек  
*  Расчет формул: \< 0.5 сек  
*  Поиск и фильтрация: \< 1 сек

Нагрузка

*  Одновременных пользователей: до 10  
*  Транзакций в день: до 100  
*  Шаблонов: до 1000 активных  
*  Товарных записей: до 1 000,000

Оптимизации

*  Индексы на часто используемые поля  
*  Пагинация больших списков  
*  Кеширование шаблонов  
*  Сжатие статических ресурсов

 

Безопасность

Входные данные

*  Валидация всех пользовательских данных  
*  Экранирование HTML/SQL  
*  Ограничение размеров загружаемых файлов  
*  Белый список разрешенных символов

SQL инъекции

* Подготовленные запросы (prepared statements)  
* Валидация типов данных  
* Экранирование спецсимволов

XSS защита

* Экранирование вывода в HTML  
* Content Security Policy заголовки  
* Валидация JSON данных

Ограничения формул

*  Whitelist математических функций  
*  Запрет системных функций  
*  Ограничение времени выполнения  
*  Валидация переменных

14. # Прототип

https://www.figma.com/design/6FY1BeBGl07llJlEbCcOoz/sum?nodeid=79582826\&t=RJqlhTzDzFq9VEGX0